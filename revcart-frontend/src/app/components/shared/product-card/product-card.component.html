<div class="product-card">
  <div class="product-image">
    <img [src]="product.imageUrl" [alt]="product.name" loading="lazy">
    <div class="product-badge" *ngIf="product.discount">
      {{product.discount}}% OFF
    </div>
    
    <!-- Add to Cart Button (shown when quantity is 0) -->
    <button 
      class="add-to-cart-btn" 
      *ngIf="quantity === 0"
      (click)="addToCart()" 
      [disabled]="product.currentStock === 0">
      <i class="fas fa-plus" *ngIf="product.currentStock > 0"></i>
      <span *ngIf="product.currentStock === 0" class="out-of-stock">Out of Stock</span>
    </button>
    
    <!-- Quantity Counter (shown when quantity > 0) -->
    <div class="quantity-counter" *ngIf="quantity > 0">
      <button class="quantity-btn decrease" (click)="decreaseQuantity()">
        <i class="fas fa-minus"></i>
      </button>
      <span class="quantity-display">{{quantity}}</span>
      <button class="quantity-btn increase" (click)="increaseQuantity()" [disabled]="quantity >= product.currentStock">
        <i class="fas fa-plus"></i>
      </button>
    </div>
  </div>
  
  <div class="product-info">
    <h4 class="product-name">{{product.name}}</h4>
    <div class="product-rating">
      <div class="stars">
        <i class="fas fa-star" *ngFor="let star of getStars(product.rating)"></i>
      </div>
      <span class="rating-text">({{product.rating}})</span>
    </div>
    <div class="product-price">
      <span class="current-price">₹{{product.price}}</span>
      <span class="original-price" *ngIf="product.originalPrice">₹{{product.originalPrice}}</span>
    </div>
    <div class="stock-info" *ngIf="product.currentStock <= 5 && product.currentStock > 0">
      <span class="low-stock">Only {{product.currentStock}} left!</span>
    </div>
    <div class="stock-info" *ngIf="product.currentStock === 0">
      <span class="out-of-stock-badge">Out of Stock</span>
    </div>
  </div>
</div>